sap.ui.define(["sap/ui/core/mvc/Controller","com/destshar/prsr/controller/Base.controller","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,t,a,i){"use strict";return t.extend("com.destshar.prsr.controller.Main",{onInit:function(){this.oViewData={};this.oViewDataModel=new a(this.oViewData);this.getView().setModel(this.oViewDataModel,"ViewData");this.oViewState={I18NVisible:false};this.oViewStateModel=new a(this.oViewState);this.getView().setModel(this.oViewStateModel,"ViewState")},_parseXML:function(e){let t=new DOMParser;let a=t.parseFromString(e,"text/xml");return a},_createI18N:function(){this.oViewData.I18N="";this.oViewDataModel.refresh();if(this._validateXML())return;let e=["title","text","headerText"];let t=this._parseXML(this.oViewData.Source);let a="";Array.from(t.all).forEach(t=>{let i=t.nodeName;let r=Array.from(t.attributes).filter(t=>e.some(e=>t.nodeName.includes(e)));r.forEach(e=>{if(!e.nodeValue.startsWith("{")){let t=e.nodeValue;let r=this._createPrefix(e.nodeName,i);let s=r+e.nodeValue.replace(/[^a-zA-Z0-9 ]/g,"").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join("");a+=s+"="+t+"\n";e.nodeValue="{i18n>"+s+"}"}})});this.oViewData.Result=t.documentElement.outerHTML;this.oViewData.Result=this.oViewData.Result.replace(/&gt;/g,">");this.oViewData.I18N=a;this.oViewDataModel.refresh()},_createPrefix:function(e,t){let a;switch(e){case"text":switch(t){case"Button":a="btn";break;case"RadioButton":a="rbt";break;case"Label":a="lbl";break;case"CheckBox":a="chb";break;break;case"Text":a="txt";break;default:a="txt"}break;case"title":a="ttl";break;case"headerText":a="hdr";break;case"placeholder":a="plh";break;case"tooltip":a="ttp";break}return a},_getAllIDs:function(){if(this._validateXML())return;let e=this._parseXML(this.oViewData.Source);let t="";Array.from(e.all).forEach(e=>{Array.from(e.attributes).forEach(e=>{if(e.nodeName==="id"){t+='"'+e.nodeValue+'",\n'}})});this.oViewData.Result=t.slice(0,-2);this.oViewDataModel.refresh()},_validateXML:function(){let e=this._parseXML(this.oViewData.Source);let t=Array.from(e.all);let a=true;let i="";t.forEach(e=>{if(e.nodeName==="parsererror"){i+=e.innerText+"\n\n"}});if(i===""){i="No errors found";a=false}i=i.replaceAll("Below is a rendering of the page up to the first error.","");this.oViewData.Result=i;this.oViewDataModel.refresh();return a},_getRequiredFieldsIDs:function(){this.oViewData.Result="Functionality in development";this.oViewDataModel.refresh();return;if(this._validateXML())return;let e=this._parseXML(this.oViewData.Source);let t="";Array.from(e.all).forEach((e,t,a)=>{Array.from(e.attributes).forEach(e=>{if(e.nodeName==="required"&&e.nodeValue){}})});this.oViewData.Result=t.slice(0,-2);this.oViewDataModel.refresh()},onOptionSelect:function(e){this.vSelectedOption=e.getSource().getSelectedIndex();this.oViewData.Result="";this.oViewData.I18N="";this.oViewDataModel.refresh();if(this.vSelectedOption===0)this.oViewState.I18NVisible=true;else this.oViewState.I18NVisible=false;this.oViewStateModel.refresh()},onProcess:function(e){switch(this.vSelectedOption){case 0:this._createI18N();break;case 1:this._getAllIDs();break;case 2:this._getRequiredFieldsIDs();break;case 3:this._validateXML();break;default:i.show("Select option first")}}})});
//# sourceMappingURL=Main.controller.js.map